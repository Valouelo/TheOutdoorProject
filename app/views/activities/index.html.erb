<h1>Toutes les annnonces </h1>

<%= link_to "Déposer une annonce", new_activity_path %>


<section class="carousel">
  <div class="carousel-container">
    <% categories = [] %>
    <% @activities.each do |activity| %>
      <% categories << activity.category %>
    <% end %>
    <% categories.uniq.each do |category| %>
      <span class="filter-option" data-action="click->filter#filter"><%= category %></span>
    <% end %>
  </div>
</section>

<%= form_with(url: activities_path, method: :get, local: true) do %>
  <div class="filters">
    <div>
      <label for="start_date">Date de début:</label>
      <%= date_field_tag :start_date, params[:start_date] %>
    </div>
    <div>
      <label for="end_date">Date de fin:</label>
      <%= date_field_tag :end_date, params[:end_date] %>
    </div>
    <div>
      <label for="num_people">Nombre de personnes:</label>
      <%= number_field_tag :num_people, params[:num_people] %>
    </div>
    <div>
      <label for="level">Niveau:</label>
      <%= select_tag :level, options_for_select(['Débutant', 'Intermédiaire', 'Avancé'], params[:level]), include_blank: true %>
    </div>
    <div>
      <%= submit_tag 'Filtrer', class: 'btn btn-primary' %>
    </div>
  </div>
<% end %>

<div id="activities-container">
  <div class="row">
    <% @activities.each do |activity| %>
      <div class="col-md-4 mb-4"  data-filter-target="card" data-category="<%= activity.category %>">
        <div class="card h-100">
          <a href="<%= activities_path(activity) %>" class="text-decoration-none" data-title="<%= activity.title %>" data-name="<%= activity.name %>" data-date="<%= activity.date %>" data-time="<%= activity.time %>" data-level="<%= activity.level %>">
            <div class="d-flex justify-content-center mt-3">
              <% if activity.photo.attached? %>
                <%= cl_image_tag activity.photo.key, class: "img-thumbnail", width: "150", height: "100" %>
              <% else %>
                <img src="images/outdoor-logo.png" alt="Activity Photo" class="img-thumbnail" width="150" height="100">
             <% end %>
            </div>
            <div class="card-body text-center">
                <h5 class="card-name"><%= activity.name%></h5>
                <p class="card-title"><strong><%= activity.title%></strong></p>
                <p class="card-text"><%= activity.description %></p>
                <button>Voir l'activité</button>
            </div>
          </a>
        </div>
      </div>
    <% end %>
  </div>
</div>
